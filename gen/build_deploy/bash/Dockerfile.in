FROM centos:7
MAINTAINER help@dcos.io

WORKDIR /
RUN yum update --assumeyes \
    && yum install --assumeyes --tolerant curl ca-certificates git openssh tar xz zlib \
    && yum clean all
VOLUME ["/genconf"]

EXPOSE 9000
ENTRYPOINT ["/installer_internal_wrapper"]

# Add the mutable artifacts last to increase caching, starting with the common one
ADD {installer_bootstrap_filename} /opt/mesosphere/
COPY installer_internal_wrapper /installer_internal_wrapper
# TODO(cmaloney): Switch to copying across a whole artifacts directory
COPY {bootstrap_filename} /artifacts/bootstrap/{bootstrap_filename}
COPY {packages_dir} /artifacts/packages
COPY {bootstrap_active_filename} /artifacts/bootstrap/{bootstrap_active_filename}
COPY {bootstrap_latest_filename} /artifacts/bootstrap/{bootstrap_latest_filename}
COPY {latest_complete_filename} /artifacts/complete/{latest_complete_filename}
COPY gen_extra/ /gen_extra
