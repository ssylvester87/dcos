#!/bin/bash
source /opt/mesosphere/environment.export
export LIB_INSTALL_DIR="$PKG_PATH/lib/python3.5/site-packages"
mkdir -p "$LIB_INSTALL_DIR"
pip3 install --no-deps --install-option="--prefix=$PKG_PATH" --root=/ /pkg/src/pytest_html
pip3 install --no-deps --install-option="--prefix=$PKG_PATH" --root=/ /pkg/src/ptyprocess
pip3 install --no-deps --install-option="--prefix=$PKG_PATH" --root=/ /pkg/src/pexpect

# import the open source tests
mkdir -p $PKG_PATH/open_source_tests
cp -r /pkg/src/dcos/packages/dcos-integration-test/extra/* $PKG_PATH/open_source_tests/
# move utils so that they have the same path as in open source
mv $PKG_PATH/open_source_tests/util $PKG_PATH/

# Transfer enterprise test resouces
cp -r /pkg/extra/* $PKG_PATH/
# overwrite the open source cluster_fixture.py with EE version
cp $PKG_PATH/api_session_fixture.py $PKG_PATH/open_source_tests/
